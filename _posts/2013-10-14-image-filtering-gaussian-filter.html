---
layout: post
title: 'Image Filtering : Gaussian Filter '
date: '2013-10-14T02:49:00.003-07:00'
author: Sumit Agrawal
tags: 
modified_time: '2013-10-14T02:49:36.638-07:00'
thumbnail: http://3.bp.blogspot.com/-_eAh0snsMKo/UluusfGWg9I/AAAAAAAAAEA/ugGMpZGX5ys/s72-c/gaussian_formula.png
blogger_id: tag:blogger.com,1999:blog-680750426739773469.post-3434163499044159037
blogger_orig_url: http://codewithgeeks.blogspot.com/2013/10/image-filtering-gaussian-filter.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">First things first, what is Gaussian filter?<br /><br />Gaussian filter is a kernel based on the values obtained by plotting Gaussian function.<br /><br />In my <a href="http://codewithgeeks.blogspot.in/2013/10/image-filtering-basics-convolution-and_13.html" target="_blank">previous post</a> we have seen how to use filter2D function provided by opencv to perform correlation on the images with given kernel.<br /><br />We also discussed an example of blur operator. This operator assigns equal weight to every element in the neighborhood. But it is quite natural to think that the pixels which are close to target pixel in image should have more weight assigned to them. This is exactly what we try to achieve using Gaussian filter.<br /><br />Gaussian function is given by,<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-_eAh0snsMKo/UluusfGWg9I/AAAAAAAAAEA/ugGMpZGX5ys/s1600/gaussian_formula.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="86" src="http://3.bp.blogspot.com/-_eAh0snsMKo/UluusfGWg9I/AAAAAAAAAEA/ugGMpZGX5ys/s320/gaussian_formula.png" width="320" /></a></div>&nbsp;The plot of this function looks like this,<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-cXdu54Msx84/UluuzzfG3hI/AAAAAAAAAEQ/onqnGe_aHSE/s1600/gaussian_3d.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-cXdu54Msx84/UluuzzfG3hI/AAAAAAAAAEQ/onqnGe_aHSE/s1600/gaussian_3d.png" /></a></div><br />Values of Gaussian function have been used to construct this kernel.<br />As you can see the center pixel has maximum weight of 0.159 and weight values decreases as the distance from center pixel increases. All the pixels which are at same distance from the center pixel have same weight value, are also known as contours. <br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-YJGaPDW37Rk/UluuzfpCZMI/AAAAAAAAAEI/eckiyKE8X7U/s1600/gaussian_kernel.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="196" src="http://1.bp.blogspot.com/-YJGaPDW37Rk/UluuzfpCZMI/AAAAAAAAAEI/eckiyKE8X7U/s320/gaussian_kernel.png" width="320" /></a></div><br />Following image is formed using Gaussian kernel.<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-VzkGmjnzrlI/Uluu5RM48dI/AAAAAAAAAEY/cswRvoFHHGk/s1600/gaussian_kernel_view.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-VzkGmjnzrlI/Uluu5RM48dI/AAAAAAAAAEY/cswRvoFHHGk/s1600/gaussian_kernel_view.png" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div>Lets compare results of blur operator in the previous post and<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-oRwN7Kj-xxc/Ulu73NiimeI/AAAAAAAAAEw/DK41IHiA9-I/s1600/original.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-oRwN7Kj-xxc/Ulu73NiimeI/AAAAAAAAAEw/DK41IHiA9-I/s1600/original.png" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><b>Original Image</b></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-xUY-LvGL5E8/Ulu7zXBKBBI/AAAAAAAAAEo/cM16MqxwX6A/s1600/out.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-xUY-LvGL5E8/Ulu7zXBKBBI/AAAAAAAAAEo/cM16MqxwX6A/s1600/out.png" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;">Blur Operator</div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-BroXeIeovY4/Ulu732zDzCI/AAAAAAAAAE4/CEvNj3jhEuQ/s1600/out_gaussian.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-BroXeIeovY4/Ulu732zDzCI/AAAAAAAAAE4/CEvNj3jhEuQ/s1600/out_gaussian.png" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;">Gaussian Smoothing</div>As it is evident from the result that features of image are well preserved in case of Gaussian kernel than that of the blur operator.<br /><br />Sample code for Gaussian Blurring:<br /><br /><script type="syntaxhighlighter" class="brush : cpp"><![CDATA[  // Scan Images and Modify. #include<iostream>#include "cv.h" #include "highgui.h" #include <cstring>using namespace cv; using namespace std;  // Function getSum returns total sum of all the elements of given matrix. // This function makes use of iterator classes to access elements of given matrix. // To learn more about iterator classes, please read my posts // Image Processing Basics: Part I and Part II float getSum(Mat kernel) {  float sum = 0;  for(typeof(kernel.begin<float>()) it = kernel.begin<float>(); it!= kernel.end<float>() ; it++)  {   sum+=*it;  }  return sum; }  int main() {  string path = "res/download.jpg";  Mat src = imread(path,CV_LOAD_IMAGE_ANYCOLOR);  if(!src.data)  {   cout<<"fail\n";   return -1;  }  Mat dest;   // default point, represents center of the kernel.  Point anchor = Point(-1,-1);   double delta = 0;   // negative values of ddepth indicate that depth of source and destination Mat is same.  int ddepth = -1;   // Mask.  // Change kernel here to achieve different effects.  // Mat kernel = Mat::ones(5,5,CV_32F);   // Gaussian Matrix for gaussian smoothing.  Mat kernel = ( Mat_<float>(5,5)<< .003, .013, .022, .013, .003,             .013, .059, .097, .059, .013,             .022, .097, .159, .097, .022,             .013, .059, .097, .059, .013,             .003, .013, .022, .013, .003) ;  // Normalize the mask.  kernel = kernel / (float) getSum(kernel) ;   // Calling filter2D  filter2D(src,dest,ddepth,kernel,anchor,delta,BORDER_DEFAULT);   namedWindow("original",CV_WINDOW_AUTOSIZE);  namedWindow("out",CV_WINDOW_AUTOSIZE);   imshow("out",src);  imshow("original",dest);   waitKey(0);   // write output to disk.  imwrite("res/original.png",src);  imwrite("res/out_gaussian.png",dest);  return 0; }  ]]></script></div>