---
layout: post
title: 'Repack packages [Generate installation files from installed applications]:
  Ubuntu [Debian]'
date: '2013-11-01T07:44:00.000-07:00'
author: Sumit Agrawal
tags: 
modified_time: '2013-11-01T07:44:27.073-07:00'
blogger_id: tag:blogger.com,1999:blog-680750426739773469.post-8562353262052580098
blogger_orig_url: http://codewithgeeks.blogspot.com/2013/11/repack-packages-generate-installation.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><div>There is a way to repack installed packages from Ubuntu, so that the same package can be used to install application on other systems as well. Packages are nothing but installation files. Usually we end up downloading these packages for every new installation, in this post we will discuss how to avoid that. &nbsp;</div><div><br /></div>1) First of all we need to install <a href="http://man.he.net/man1/fakeroot">fakeroot</a>.<br /><div><br /></div><br /><div><script src="https://gist.github.com/sumit4iit/7265582.js"></script></div><div>"Fakeroot" simulates the root environment for execution of commands which require root privileges otherwise.&nbsp;</div><div><br /></div><div>2) Install <a href="http://manpages.ubuntu.com/manpages/lucid/man1/dpkg.1.html">dpkg</a>. dpkg is a package manager for Debian.<br /><br /><script src="https://gist.github.com/sumit4iit/7265603.js"></script><br />3) Now next step is to repack the package.<br />This script requires 'package name' of application/library to repack. Usually name of packages and applications/libraries are same, but this is not true in every case. For example consider opencv which is collection of many libraries.<br /><br />Package name can be confirmed using following command.<br /><br /><script src="https://gist.github.com/sumit4iit/7265666.js"></script><br /></div><div>Having done that use following command to repack.<br /><br /><script src="https://gist.github.com/sumit4iit/7265625.js"></script><br /><br /><div style="text-align: left;"><b>Entire Backup</b></div><div style="text-align: left;"><b><br /></b></div><div style="text-align: left;">The procedure explained above is good only if you need backup of select applications. To repack entire system you need better strategy since typing name of every single package is not that good idea.&nbsp;</div><div style="text-align: left;"><br /></div><div style="text-align: left;">So to begin with, we first of all generate a list of installed packages and store that output to a text file.</div><div style="text-align: left;"><br /></div><div style="text-align: left;"><script src="https://gist.github.com/sumit4iit/7266396.js"></script></div><div style="text-align: left;"><br /></div><div style="text-align: left;">The output file contains a list of packages. Every row begins with the name of package and the status of that package. We need to remove all the packages which are marked as deinstall from the list. For this you can use simple search and replace.&nbsp;</div><div style="text-align: left;"><br /></div><div style="text-align: left;">Next step is to reformat this output file so that is can be as a bash script. &nbsp;Delete all the occurrences of word "install" and remove all new-line characters from the file. Add "sudo fakeroot dpkg-repack " at the beginning of file and save this file as backup.sh . Change file permissions to make it executable and execute backup.sh from terminal. This will generate Debian packages for all the listed package names.&nbsp;</div><div style="text-align: left;">The script should look like this,</div><div style="text-align: left;"><br /></div><div style="text-align: left;"><script src="https://gist.github.com/sumit4iit/7266418.js"></script></div><div style="text-align: left;"><br /></div><div style="text-align: left;"><br /></div></div></div>